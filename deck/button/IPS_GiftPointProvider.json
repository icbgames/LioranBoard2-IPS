{ "color": 12632256.0, "persistent": 1.0, "text": "Gift\nPoint\nProvider", "release_duration": 0.0, "queueable": 0.0, "command_list": [ { "cmd": 6.0, "obsid": "Main", "pos": 0.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "必要な情報を設定ファイルから読み込み", "v0": 4.0 }, { "b1": "gift", "b3": "point1", "cmd": 125.0, "obsid": "Main", "pos": 1.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "\/IPS\/ips.ini", "b2": "points_for_subgift_tier1" }, { "b1": "gift", "b3": "point2", "cmd": 125.0, "obsid": "Main", "pos": 2.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "\/IPS\/ips.ini", "b2": "points_for_subgift_tier2" }, { "b1": "gift", "b3": "point3", "cmd": 125.0, "obsid": "Main", "pos": 3.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "\/IPS\/ips.ini", "b2": "points_for_subgift_tier3" }, { "b1": "basic", "b3": "debug", "cmd": 125.0, "obsid": "Main", "pos": 4.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "\/IPS\/ips.ini", "b2": "debug" }, { "cmd": 4.0, "obsid": "Main", "pos": 5.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "サブスク情報取得", "v0": 6.0 }, { "b1": "user_id", "cmd": 66.0, "obsid": "Main", "pos": 6.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "userId" }, { "b1": "user_name", "cmd": 66.0, "obsid": "Main", "pos": 7.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "userName" }, { "b1": "display_name", "cmd": 66.0, "obsid": "Main", "pos": 8.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "disp" }, { "b1": "tier", "cmd": 66.0, "obsid": "Main", "pos": 9.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "tier" }, { "b1": "community_gift", "cmd": 66.0, "obsid": "Main", "pos": 10.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "communityGift" }, { "b1": "amount", "cmd": 66.0, "obsid": "Main", "pos": 11.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "amount" }, { "cmd": 5.0, "obsid": "Main", "pos": 12.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "ポイント更新処理", "v0": 46.0 }, { "cmd": 6.0, "obsid": "Main", "pos": 13.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "初期化系", "v0": 19.0 }, { "b1": "pointCsvPath", "cmd": 163.0, "obsid": "Main", "pos": 14.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "main_directory" }, { "b1": "debugLogCsvPath", "cmd": 163.0, "obsid": "Main", "pos": 15.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "main_directory" }, { "b1": "+=", "cmd": 15.0, "obsid": "Main", "pos": 16.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "pointCsvPath", "b2": "\"IPS\\points.csv\"" }, { "b1": "+=", "cmd": 15.0, "obsid": "Main", "pos": 17.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLogCsvPath", "b2": "\"IPS\\debuglog.csv\"" }, { "cmd": 211.0, "obsid": "Main", "pos": 18.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "cmd": 211.0, "obsid": "Main", "pos": 19.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" }, { "b1": "\/$pointCsvPath$\/", "cmd": 202.0, "obsid": "Main", "pos": 20.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "b1": "\/$debugLogCsvPath$\/", "cmd": 202.0, "obsid": "Main", "pos": 21.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" }, { "b1": "=", "cmd": 15.0, "obsid": "Main", "pos": 22.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "add", "b2": "0" }, { "cmd": 24.0, "obsid": "Main", "pos": 23.0, "v3": { "Tier 1": 24.0, "default": 0.0, "Tier 3": 28.0, "Tier 2": 26.0 }, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "tier", "v0": 6.0 }, { "b5": "", "b13": "", "b19": "", "b17": "", "b1": "", "b7": "", "b11": "", "b9": "", "b15": "", "b3": "", "cmd": 26.0, "obsid": "Main", "pos": 24.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b16": "", "b0": "Tier 1", "b18": "", "b4": "", "b12": "", "b14": "", "b2": "", "b8": "", "b6": "", "b10": "", "v0": 1.0, "v2": 1.0 }, { "b1": "=", "cmd": 15.0, "obsid": "Main", "pos": 25.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "add", "b2": "point1" }, { "b5": "", "b13": "", "b19": "", "b17": "", "b1": "", "b7": "", "b11": "", "b9": "", "b15": "", "b3": "", "cmd": 26.0, "obsid": "Main", "pos": 26.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b16": "", "b0": "Tier 2", "b18": "", "b4": "", "b12": "", "b14": "", "b2": "", "b8": "", "b6": "", "b10": "", "v0": 1.0, "v2": 1.0 }, { "b1": "=", "cmd": 15.0, "obsid": "Main", "pos": 27.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "add", "b2": "point2" }, { "b5": "", "b13": "", "b19": "", "b17": "", "b1": "", "b7": "", "b11": "", "b9": "", "b15": "", "b3": "", "cmd": 26.0, "obsid": "Main", "pos": 28.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b16": "", "b0": "Tier 3", "b18": "", "b4": "", "b12": "", "b14": "", "b2": "", "b8": "", "b6": "", "b10": "", "v0": 1.0, "v2": 1.0 }, { "b1": "=", "cmd": 15.0, "obsid": "Main", "pos": 29.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "add", "b2": "point3" }, { "cmd": 4.0, "obsid": "Main", "pos": 30.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "コミュニティギフトの場合は個数を乗算する", "v0": 2.0 }, { "b53": "", "b5": "", "b13": "==", "v14": 0.0, "b36": "", "b38": "", "v10": 0.0, "b32": "", "b19": "==", "b57": "", "b59": "", "b17": "", "b1": "==", "v18": 0.0, "v16": 0.0, "b34": "==", "b7": "==", "b11": "", "b9": "", "b51": "", "b15": "", "b3": "", "b55": "==", "v12": 0.0, "cmd": 7.0, "b30": "", "b43": "==", "v21": 0.0, "v1": 0.0, "b26": "", "b28": "==", "obsid": "Main", "b22": "==", "pos": 31.0, "v5": 0.0, "b47": "", "b49": "==", "v3": 0.0, "vis": 1.0, "b24": "", "ms": 0.0, "b41": "", "sel": 0.0, "b45": "", "v9": 0.0, "dis": 0.0, "xpan": 0.0, "b20": "", "v7": 0.0, "b33": "", "v11": 0.0, "b16": "==", "b0": "communityGift", "b58": "==", "b56": "", "b18": "", "b4": "==", "b12": "", "b52": "==", "b39": "", "b37": "==", "v15": 0.0, "b54": "", "b14": "", "b2": "1", "b31": "==", "v13": 0.0, "b35": "", "v17": 0.0, "v19": 0.0, "b50": "", "b8": "", "b6": "", "b10": "==", "b23": "", "v4": 0.0, "b48": "", "b46": "==", "v20": 0.0, "b42": "", "b29": "", "v0": 1.0, "b27": "", "b44": "", "b21": "", "v6": 0.0, "v8": 0.0, "v2": 1.0, "b25": "==", "b40": "==", "v22": 0.0 }, { "b1": "*=", "cmd": 15.0, "obsid": "Main", "pos": 32.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "add", "b2": "amount" }, { "b53": "", "b5": "", "b13": "==", "v14": 0.0, "b36": "", "b38": "", "v10": 0.0, "b32": "", "b19": "==", "b57": "", "b59": "", "b17": "", "b1": "==", "v18": 0.0, "v16": 0.0, "b34": "==", "b7": "==", "b11": "", "b9": "", "b51": "", "b15": "", "b3": "", "b55": "==", "v12": 0.0, "cmd": 7.0, "b30": "", "b43": "==", "v21": 0.0, "v1": 0.0, "b26": "", "b28": "==", "obsid": "Main", "b22": "==", "pos": 33.0, "v5": 0.0, "b47": "", "b49": "==", "v3": 0.0, "vis": 1.0, "b24": "", "ms": 0.0, "b41": "", "sel": 0.0, "b45": "", "v9": 0.0, "dis": 0.0, "xpan": 0.0, "b20": "", "v7": 0.0, "b33": "", "v11": 0.0, "b16": "==", "b0": "debug", "b58": "==", "b56": "", "b18": "", "b4": "==", "b12": "", "b52": "==", "b39": "", "b37": "==", "v15": 0.0, "b54": "", "b14": "", "b2": "1", "b31": "==", "v13": 0.0, "b35": "", "v17": 0.0, "v19": 0.0, "b50": "", "b8": "", "b6": "", "b10": "==", "b23": "", "v4": 0.0, "b48": "", "b46": "==", "v20": 0.0, "b42": "", "b29": "", "v0": 2.0, "b27": "", "b44": "", "b21": "", "v6": 0.0, "v8": 0.0, "v2": 1.0, "b25": "==", "b40": "==", "v22": 0.0 }, { "b1": "[GPP]<\/$global.since_2020$\/ \/$global.elapsed_time$\/> user=\/$userName$\/; tier=\/$tier$\/; communityGift=\/$communityGift$\/; amount=\/$amount$\/; add=\/$add$\/", "cmd": 200.0, "obsid": "Main", "pos": 34.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" }, { "b1": "\/$debugLogCsvPath$\/", "cmd": 201.0, "obsid": "Main", "pos": 35.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" }, { "cmd": 4.0, "obsid": "Main", "pos": 36.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "ポイントCSVが存在しない場合は作成", "v0": 9.0 }, { "b1": "pointRows", "cmd": 216.0, "obsid": "Main", "pos": 37.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "v0": 0.0 }, { "b1": "pointRows", "cmd": 81.0, "obsid": "Main", "pos": 38.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "typeOfRows" }, { "b53": "", "b5": "", "b13": "==", "v14": 0.0, "b36": "", "b38": "", "v10": 0.0, "b32": "", "b19": "==", "b57": "", "b59": "", "b17": "", "b1": "==", "v18": 0.0, "v16": 0.0, "b34": "==", "b7": "==", "b11": "", "b9": "", "b51": "", "b15": "", "b3": "", "b55": "==", "v12": 0.0, "cmd": 7.0, "b30": "", "b43": "==", "v21": 0.0, "v1": 0.0, "b26": "", "b28": "==", "obsid": "Main", "b22": "==", "pos": 39.0, "v5": 0.0, "b47": "", "b49": "==", "v3": 0.0, "vis": 1.0, "b24": "", "ms": 0.0, "b41": "", "sel": 0.0, "b45": "", "v9": 0.0, "dis": 0.0, "xpan": 0.0, "b20": "", "v7": 0.0, "b33": "", "v11": 0.0, "b16": "==", "b0": "typeOfRows", "b58": "==", "b56": "", "b18": "", "b4": "==", "b12": "", "b52": "==", "b39": "", "b37": "==", "v15": 0.0, "b54": "", "b14": "", "b2": "\"undefined\"", "b31": "==", "v13": 0.0, "b35": "", "v17": 0.0, "v19": 0.0, "b50": "", "b8": "", "b6": "", "b10": "==", "b23": "", "v4": 0.0, "b48": "", "b46": "==", "v20": 0.0, "b42": "", "b29": "", "v0": 6.0, "b27": "", "b44": "", "b21": "", "v6": 0.0, "v8": 0.0, "v2": 1.0, "b25": "==", "b40": "==", "v22": 0.0 }, { "cmd": 211.0, "obsid": "Main", "pos": 40.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "b1": "user_id", "cmd": 198.0, "obsid": "Main", "pos": 41.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "b5": "", "b1": "point", "b3": "", "cmd": 199.0, "obsid": "Main", "pos": 42.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b4": "", "b2": "0", "b6": "" }, { "b1": "\/$pointCsvPath$\/", "cmd": 201.0, "obsid": "Main", "pos": 43.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "cmd": 211.0, "obsid": "Main", "pos": 44.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "b1": "\/$pointCsvPath$\/", "cmd": 202.0, "obsid": "Main", "pos": 45.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "cmd": 6.0, "obsid": "Main", "pos": 46.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "ポイントCSVから当該ユーザーを検索、存在していればポイント付与、存在していなければ行を作成してポイント付与", "v0": 12.0 }, { "b1": "\"user_id\"", "b3": "row", "cmd": 208.0, "obsid": "Main", "pos": 47.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b2": "userId" }, { "b53": "", "b5": "", "b13": "==", "v14": 0.0, "b36": "", "b38": "", "v10": 0.0, "b32": "", "b19": "==", "b57": "", "b59": "", "b17": "", "b1": "==", "v18": 0.0, "v16": 0.0, "b34": "==", "b7": "==", "b11": "", "b9": "", "b51": "", "b15": "", "b3": "", "b55": "==", "v12": 0.0, "cmd": 7.0, "b30": "", "b43": "==", "v21": 0.0, "v1": 4.0, "b26": "", "b28": "==", "obsid": "Main", "b22": "==", "pos": 48.0, "v5": 0.0, "b47": "", "b49": "==", "v3": 0.0, "vis": 1.0, "b24": "", "ms": 0.0, "b41": "", "sel": 0.0, "b45": "", "v9": 0.0, "dis": 0.0, "xpan": 0.0, "b20": "", "v7": 0.0, "b33": "", "v11": 0.0, "b16": "==", "b0": "row", "b58": "==", "b56": "", "b18": "", "b4": "==", "b12": "", "b52": "==", "b39": "", "b37": "==", "v15": 0.0, "b54": "", "b14": "", "b2": "-1", "b31": "==", "v13": 0.0, "b35": "", "v17": 0.0, "v19": 0.0, "b50": "", "b8": "", "b6": "", "b10": "==", "b23": "", "v4": 0.0, "b48": "", "b46": "==", "v20": 0.0, "b42": "", "b29": "", "v0": 3.0, "b27": "", "b44": "", "b21": "", "v6": 0.0, "v8": 0.0, "v2": 1.0, "b25": "==", "b40": "==", "v22": 0.0 }, { "b1": "\/$userId$\/", "cmd": 200.0, "obsid": "Main", "pos": 49.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point" }, { "b1": "\"user_id\"", "b3": "row", "cmd": 208.0, "obsid": "Main", "pos": 50.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b2": "userId" }, { "b1": "\"point\"", "b3": "=", "cmd": 207.0, "obsid": "Main", "pos": 51.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b4": "add", "b2": "row" }, { "b1": "\"point\"", "b3": "p", "cmd": 206.0, "obsid": "Main", "pos": 52.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b2": "row" }, { "b1": "p", "cmd": 79.0, "obsid": "Main", "pos": 53.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "p" }, { "b1": "+=", "cmd": 15.0, "obsid": "Main", "pos": 54.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "p", "b2": "add" }, { "b1": "\"point\"", "b3": "=", "cmd": 207.0, "obsid": "Main", "pos": 55.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "point", "b4": "p", "b2": "row" }, { "b53": "", "b5": "", "b13": "==", "v14": 0.0, "b36": "", "b38": "", "v10": 0.0, "b32": "", "b19": "==", "b57": "", "b59": "", "b17": "", "b1": "==", "v18": 0.0, "v16": 0.0, "b34": "==", "b7": "==", "b11": "", "b9": "", "b51": "", "b15": "", "b3": "", "b55": "==", "v12": 0.0, "cmd": 7.0, "b30": "", "b43": "==", "v21": 0.0, "v1": 0.0, "b26": "", "b28": "==", "obsid": "Main", "b22": "==", "pos": 56.0, "v5": 0.0, "b47": "", "b49": "==", "v3": 0.0, "vis": 1.0, "b24": "", "ms": 0.0, "b41": "", "sel": 0.0, "b45": "", "v9": 0.0, "dis": 0.0, "xpan": 0.0, "b20": "", "v7": 0.0, "b33": "", "v11": 0.0, "b16": "==", "b0": "debug", "b58": "==", "b56": "", "b18": "", "b4": "==", "b12": "", "b52": "==", "b39": "", "b37": "==", "v15": 0.0, "b54": "", "b14": "", "b2": "1", "b31": "==", "v13": 0.0, "b35": "", "v17": 0.0, "v19": 0.0, "b50": "", "b8": "", "b6": "", "b10": "==", "b23": "", "v4": 0.0, "b48": "", "b46": "==", "v20": 0.0, "b42": "", "b29": "", "v0": 2.0, "b27": "", "b44": "", "b21": "", "v6": 0.0, "v8": 0.0, "v2": 1.0, "b25": "==", "b40": "==", "v22": 0.0 }, { "b1": "[GPP]<\/$global.since_2020$\/ \/$global.elapsed_time$\/> user=\/$userId$\/ finished.", "cmd": 200.0, "obsid": "Main", "pos": 57.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" }, { "b1": "\/$debugLogCsvPath$\/", "cmd": 201.0, "obsid": "Main", "pos": 58.0, "vis": 1.0, "ms": 0.0, "sel": 0.0, "dis": 0.0, "xpan": 0.0, "b0": "debugLog" } ], "press_type": 0.0, "x": 0.75, "border": 2.0, "image": "", "triggers": [ { "anonsubgift": false, "tier2": true, "subgift": true, "normalsub": false, "monthmax": 2.0, "prime": false, "group_id": "", "allowcommunity": true, "tier3": true, "tier1": true, "button_id": "IPS_BTN_GPP", "trg": 1.0, "monthrange": false, "monthmin": 1.0 } ], "group_id": "", "overlappable": 0.0, "init_variable": "", "deck": 1.0, "width": 0.25, "button_id": "IPS_BTN_GPP", "button_duration": 0.0, "y": 0.25, "switch_deck": "", "height": 0.25, "release_list": [ ], "functions": 81, "stretch": 0.0 }